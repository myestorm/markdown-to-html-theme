<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= htmlWebpackPlugin.options.title %></title>
</head>
<body>
  <%- require('../../components/header.html')({
    current: 0
  })%>
  <div class="totonoo--body">
    <div class="wrapper">
      <div class="totonoo--flying-wing">
        <div class="green-dragon">
          <div class="totonoo--page-tree-placeholder">
            <div class="totonoo--page-tree" id="totonoo--page-tree">
              <ul>
                <li>
                  <a href="#"><i class="iconfont icon-book-1"></i>Typescript学习笔记</a>
                  <ul>
                    <li>
                      <a href="#" class="current">Typescript学习笔记</a>
                      <ul>
                        <li>
                          <a href="#">Typescript学习笔记</a>
                        </li>
                        <li>
                          <a href="#">初探typescript</a>
                        </li>
                        <li>
                          <a href="#">项目准备</a>
                        </li>
                        <li>
                          <a href="#">梳理一下基本的思路</a>
                        </li>
                        <li>
                          <a href="#">用TS来实现相关的功能</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="#">初探typescript</a>
                      <ul>
                        <li>
                          <a href="#">Typescript学习笔记</a>
                        </li>
                        <li>
                          <a href="#">初探typescript</a>
                        </li>
                        <li>
                          <a href="#">项目准备</a>
                        </li>
                        <li>
                          <a href="#">梳理一下基本的思路</a>
                        </li>
                        <li>
                          <a href="#">用TS来实现相关的功能</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="#">项目准备</a>
                    </li>
                    <li>
                      <a href="#">梳理一下基本的思路</a>
                    </li>
                    <li>
                      <a href="#">用TS来实现相关的功能</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="#"><i class="iconfont icon-tags"></i>初探typescript</a>
                </li>
                <li>
                  <a href="#">项目准备</a>
                </li>
                <li>
                  <a href="#">梳理一下基本的思路</a>
                </li>
                <li>
                  <a href="#">用TS来实现相关的功能</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="old-ox">
          <div class="totonoo--main">
            <div class="totonoo--article totonoo--markdown">
              <h1>初探typescript</h1>
              <h2 id="%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87"><a class="header-anchor"
                  href="#%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87">¶</a> 前期准备</h2>
              <p>
                Typescript出来很久了，也天天被人吹爆了，耳朵都快磨起茧子了。最近项目做的快，有点空闲时间，就打算学一下。学习之前先搜索了2个关键词“为什么要用Typescript”和“为什么不用Typescript”，看了一圈，挺有意思。
                总结一下我理解的结论：</p>
              <ol>
                <li>ts是超集可能不准确，没觉得多在哪里？类型检查，装饰器，JS本身也不需要这个，弱语言自有他的灵活性，何苦非得变他；</li>
                <li>ts最终的运行还是要编译成js，但是查了一下开发过程中可以使用ts-node；</li>
                <li>如果是开发网页，我觉得没有必要选择ts，业务本身就是灵活多变的，跟js很搭；</li>
                <li>如果是开发框架和通用组件，是可以选择ts的，毕竟框架都是给别人用的，输入输出应该明确；</li>
                <li>如果是node开发，也可以选择，不会java可以过下java的瘾。</li>
              </ol>
              <p>综上所述，我把学习目标先定一下，用node写一简单的评论系统（Ts + Koa + Typeorm +
                MongoDB）。如果把这个当成教程来看，是需要有前置条件的，假设会node开发，懂基本的开发流程和语法，对ES6有了解。我使用的win10操作系统。</p>
              <h2 id="%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><a class="header-anchor"
                  href="#%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83">¶</a> 搭建开发环境</h2>
              <p>一、新建目录 <code>totonoo_comments</code> 二、在 <code>totonoo_comments</code> 下打开cmd，准备开始安装依赖</p>
              <pre><code class="language-shell">npm init -y # 初始化node项目
                npm install typescript --save-dev # 添加typescript
                npm install @types/node --save-dev # 添加node.d.ts
                npm install ts-node --save-dev # 添加ts-node 可以直接执行ts文件
                npm install nodemon --save-dev # nodemon 实时监听文件变化重启服务，无需手动重启
                # 也可以用下面的命令一次性安装
                # npm install typescript @types/node ts-node nodemon --save-dev
                
                # 初始化 ts配置
                npx tsc --init --rootDir src --outDir dist --esModuleInterop --resolveJsonModule --lib es6,dom  --module commonjs
                </code></pre>
              <p>三、在 <code>package.json</code> 中添加2个任务</p>
              <pre><code class="language-json">{
                  &quot;name&quot;: &quot;totonoo_comments&quot;,
                  &quot;version&quot;: &quot;1.0.0&quot;,
                  &quot;description&quot;: &quot;&quot;,
                  &quot;main&quot;: &quot;index.js&quot;,
                  &quot;scripts&quot;: {
                    &quot;start&quot;: &quot;npm run build&quot;,
                    &quot;build&quot;: &quot;tsc -p .&quot;,
                    &quot;dev&quot;: &quot;nodemon --watch src/**/*.ts --exec \&quot;ts-node\&quot; src/index.ts&quot;,
                    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
                  },
                  &quot;keywords&quot;: [],
                  &quot;author&quot;: &quot;&quot;,
                  &quot;license&quot;: &quot;ISC&quot;,
                  &quot;devDependencies&quot;: {
                    &quot;@types/node&quot;: &quot;^14.14.7&quot;,
                    &quot;nodemon&quot;: &quot;^2.0.6&quot;,
                    &quot;ts-node&quot;: &quot;^9.0.0&quot;,
                    &quot;typescript&quot;: &quot;^4.0.5&quot;
                  }
                }
                </code></pre>
              <p>四、新建目录src和src/index.ts、src/operations.ts文件</p>
              <pre><code class="language-typescript">// operations.ts
                export const add = (x: number, y: number): number =&gt; {
                  return x + y
                }
                export const sub = (x: number, y: number): number =&gt; {
                  return x - y
                }
                export const mul = (x: number, y: number): number =&gt; {
                  return x * y
                }
                export const div = (x: number, y: number): number =&gt; {
                  return x + y
                }
                export default {
                  add,
                  sub,
                  mul,
                  div
                }
                </code></pre>
              <pre><code class="language-typescript">import { add } from './operations'
                
                const result = add(1, 3)
                console.log(result)
                </code></pre>
              <p>五、跑一下结果</p>
              <pre><code class="language-shell">npm run dev # 启动开发服务 出现以下界面 说明成功了
                # &gt; ts_demo@1.0.0 dev D:\temp\ts_demo
                # &gt; nodemon --watch src/**/*.ts --exec &quot;ts-node&quot; src/index.ts
                
                # [nodemon] 2.0.6
                # [nodemon] to restart at any time, enter `rs`
                # [nodemon] watching path(s): src\**\*.ts
                # [nodemon] watching extensions: ts,json
                # [nodemon] starting `ts-node src/index.ts`
                # 4
                # [nodemon] clean exit - waiting for changes before restart
                
                </code></pre>
              <p>六、任意修改 <code>index.ts</code> 文件，观察一下cmd内容变化，有变化证明监听也成功了。 七、在 TypeScript 中加入 ESLint</p>
              <pre><code class="language-shell"># 同一cmd 先用ctrl+c退出当前任务
                npm install eslint --save-dev # 添加 eslint
                npm install @typescript-eslint/parser --save-dev # 添加eslint ts解析器
                npm install @typescript-eslint/eslint-plugin --save-dev # 添加 eslint ts插件
                npm install eslint-config-alloy --save-dev # 添加 AlloyTeam 的eslint配置
                
                # 也可以一次性安装
                # npm install eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-config-alloy --save-dev
                </code></pre>
              <p>在项目的根目录下创建eslint配置文件 <code>.eslintrc.js</code> ，内容如下：</p>
              <pre><code class="language-javascript">module.exports = {
                  extends: [
                    'alloy',
                    'alloy/typescript',
                  ],
                  env: {
                    // 你的环境变量（包含多个预定义的全局变量）
                    //
                    // browser: true,
                    // node: true,
                    // mocha: true,
                    // jest: true,
                    // jquery: true
                  },
                  globals: {
                    // 你的全局变量（设置为 false 表示它不允许被重新赋值）
                    //
                    // myGlobal: false
                  },
                  rules: {
                    // 自定义你的规则
                    '@typescript-eslint/explicit-member-accessibility': 'off'
                  }
                }
                </code></pre>
              <p><code>package.json</code> 添加一个任务：</p>
              <pre><code class="language-json">{
                 &quot;scripts&quot;: {
                    &quot;start&quot;: &quot;npm run build&quot;,
                    &quot;build&quot;: &quot;npm run eslint &amp;&amp; tsc -p .&quot;,
                    &quot;dev&quot;: &quot;nodemon --watch src/**/*.ts --exec \&quot;ts-node\&quot; src/index.ts&quot;,
                    &quot;eslint&quot;: &quot;eslint src --ext .ts&quot;,
                    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
                  },
                }
                </code></pre>
              <p>在 <code>index.ts</code> 中加入 <code>var a = 1</code> ，然后运行下 <code>npm run eslint</code> 就可以看到有错误提示了。
                build任务中加入了打包之前先做一下eslint。</p>
              <p>到此为止，一个基本的开发环境已经跑起来了。</p>
            </div>
          </div>
          <%- require('../../components/footer.html')()%>
        </div>
        <div class="white-tiger">
          <div class="totonoo--article-nav" id="totonoo--article-nav">
            <ul>
              <li class="h2 current" data-index="0"><a
                  href="#%E5%9F%BA%E6%9C%AC%E5%86%99%E6%B3%95%E5%AF%B9%E7%85%A7%E8%A1%A8">基本写法对照表</a></li>
              <li class="h2" data-index="1"><a
                  href="#%E5%85%B3%E4%BA%8E%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%A1%A5%E5%85%85">关于枚举类型的补充</a>
              </li>
              <li class="h2" data-index="2"><a
                  href="#%E5%85%B3%E4%BA%8Evoid%E5%92%8Cnever%E7%9A%84%E8%A1%A5%E5%85%85">关于void和never的补充</a></li>
              <li class="h2" data-index="3"><a
                  href="#%E5%85%B3%E4%BA%8E%E5%87%BD%E6%95%B0%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95">关于函数的基本用法</a>
              </li>
              <li class="h2" data-index="4"><a
                  href="#%E5%85%B3%E4%BA%8E%E7%B1%BB%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95">关于类的基本用法</a></li>
              <li class="h2" data-index="5"><a href="#interface%E7%9A%84%E8%AF%B4%E6%98%8E">Interface的说明</a></li>
              <li class="h2" data-index="6"><a href="#%E5%A3%B0%E6%98%8E%E6%96%87%E4%BB%B6">声明文件</a></li>
              <li class="h2" data-index="7"><a href="#%E6%B3%9B%E5%9E%8B">泛型</a></li>
              <li class="h3" data-index="8"><a
                  href="#%E5%9C%BA%E6%99%AF1%EF%BC%9A%E4%BC%A0%E9%80%92%E8%BF%9B%E5%85%A5%E4%BB%80%E4%B9%88%E7%B1%BB%E5%9E%8B%E8%BF%94%E5%9B%9E%E4%BB%80%E4%B9%88%E7%B1%BB%E5%9E%8B">场景1：传递进入什么类型返回什么类型</a>
              </li>
              <li class="h3" data-index="9"><a
                  href="#%E5%9C%BA%E6%99%AF2%EF%BC%9A%E4%BC%A0%E5%85%A5%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84%EF%BC%8C%E5%B0%86%E5%85%B6%E4%B8%AD%E4%BA%92%E6%8D%A2%E4%BD%8D%E7%BD%AE">场景2：传入一个数组，将其中互换位置</a>
              </li>
              <li class="h3" data-index="10"><a
                  href="#%E5%9C%BA%E6%99%AF3%EF%BC%9A%E5%8A%A8%E6%80%81%E8%BE%93%E5%87%BAobject%E7%9A%84value">场景3：动态输出object的value</a>
              </li>
              <li class="h3" data-index="11"><a href="#%E6%B3%9B%E5%9E%8B%E7%BA%A6%E6%9D%9F">泛型约束</a></li>
              <li class="h2" data-index="12"><a href="#%E8%A3%85%E9%A5%B0%E5%99%A8">装饰器</a></li>
              <li class="h2" data-index="13"><a href="#reflect-metadata">reflect-metadata</a></li>
            </ul>
          </div>
        </div>
    </div>
  </div>
</body>
</html>
