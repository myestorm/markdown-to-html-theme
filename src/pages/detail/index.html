<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= htmlWebpackPlugin.options.title %></title>
  <link rel="icon" href="favicon.ico">
</head>
<body>
  <%- require('../../components/header.html')({
    current: 0
  })%>
  <div class="totonoo--body">
    <div class="wrapper">
      <div class="totonoo--flying-wing">
        <div class="green-dragon">
          <%- require('../../components/tree.html')({
            list: false
          })%>
        </div>
        <div class="old-ox">
          <div class="totonoo--main">
            <%- require('../../components/breadcrumb.html')({
              list: [{
                title: '文章分类',
                path: 'list.html'
              }, {
                title: '文章分类',
                path: 'list.html'
              }, {
                title: 'Typescript学习笔记',
                path: 'collection.html'
              }]
            })%>
            <div class="totonoo--collection-detail">
              <button class="totonoo--right-menu"><i class="iconfont icon-right-menu"></i></button>
              <div class="detail-info">
                <h1>沿着荷塘，是一条曲折的小煤屑路</h1>
                <div class="info">
                  <ul>
                    <li class="a">
                      <i class="iconfont icon-folder"></i>
                      <a href="#">散文</a>
                    </li>
                    <li class="b"><i class="iconfont icon-time"></i>2020-06-14 21:23</li>
                    <li class="c">
                      <i class="iconfont icon-tags"></i>
                      <a href="shen-cong-wen">沈从文</a>
                      <a href="yi-xiang-xi-guo-nian">忆湘西过年</a>
                      <a href="san-wen">散文</a>
                    </li>
                  </ul>
                </div>
              </div>
              <article class="totonoo--markdown">
                <h1>初探typescript</h1>
                <h2 id="%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87">
                  <a class="header-anchor" href="#%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87">¶</a> 前期准备
                </h2>
                <h3>初探typescript</h3>
                <h4>初探typescript</h4>
                <h5>初探typescript</h5>
                <h6>初探typescript</h6>
                <p>Typescript出来很久了，也天天被人吹爆了，耳朵都快磨起茧子了。最近项目做的快，有点空闲时间，就打算学一下。学习之前先搜索了2个关键词“为什么要用Typescript”和“为什么不用Typescript”，看了一圈，挺有意思。 总结一下我理解的结论：</p><ol><li>ts是超集可能不准确，没觉得多在哪里？类型检查，装饰器，JS本身也不需要这个，弱语言自有他的灵活性，何苦非得变他；</li><li>ts最终的运行还是要编译成js，但是查了一下开发过程中可以使用ts-node；</li><li>如果是开发网页，我觉得没有必要选择ts，业务本身就是灵活多变的，跟js很搭；</li><li>如果是开发框架和通用组件，是可以选择ts的，毕竟框架都是给别人用的，输入输出应该明确；</li><li>如果是node开发，也可以选择，不会java可以过下java的瘾。</li></ol><p>综上所述，我把学习目标先定一下，用node写一简单的评论系统（Ts + Koa + Typeorm + MongoDB）。如果把这个当成教程来看，是需要有前置条件的，假设会node开发，懂基本的开发流程和语法，对ES6有了解。我使用的win10操作系统。</p><h2 id="%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><a class="header-anchor" href="#%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83">¶</a> 搭建开发环境</h2><p>一、新建目录 <code>totonoo_comments</code> 二、在 <code>totonoo_comments</code>&nbsp;下打开cmd，准备开始安装依赖</p>
                <blockquote><p>但是现在出现了Web Worker，可以为 JavaScript 创造多线程环境。<br>允许主线程创建 Worker 线程，将一些任务分配给后者运行。在主线程运行的同时，Worker 线程在后台运行，两者互不干扰。等到 Worker 线程完成计算任务，再把结果返回给主线程。这样的好处是，一些计算密集型或高延迟的任务，被 Worker 线程负担了，主线程（通常负责 UI 交互）就会很流畅，不会被阻塞或拖慢。但是web worker不能操作DOM。</p></blockquote><div class="code-toolbar"><pre class=" language-powershell"><code class=" language-powershell">npm init -y # 初始化node项目
npm install typescript --save-dev # 添加typescript
&lt;p&gt;请在输入框内贴入你需要转换的HTML代码&lt;/p&gt;
&lt;p&gt;HTML转换工具，可以将HTML代码转换为HTML转义字符串&lt;/p&gt;
&lt;p&gt;直接将你所要用程序输出的大串HTML代码贴到输入框中，即可一键生成&lt;/p&gt;
&lt;p&gt;如果您觉得好用，请记得收藏我们的地址！&lt;/p&gt;
npm install @types/node --save-dev # 添加node.d.ts
npm install ts-node --save-dev # 添加ts-node 可以直接执行ts文件
npm install nodemon --save-dev # nodemon 实时监听文件变化重启服务，无需手动重启
# 也可以用下面的命令一次性安装
# npm install typescript @types/node ts-node nodemon --save-dev

# 初始化 ts配置
npx tsc --init --rootDir src --outDir dist --esModuleInterop --resolveJsonModule --lib es6,dom  --module commonjs
</code></pre><div class="toolbar"><div class="toolbar-item"><span>Shell</span></div><div class="toolbar-item"><button>Copy</button></div></div></div><p>三、在 <code>package.json</code> 中添加2个任务</p><div class="code-toolbar"><pre class=" language-json"><code class=" language-json">{
  "name": "totonoo_comments",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "start": "npm run build",
    "build": "tsc -p .",
    "dev": "nodemon --watch src/**/*.ts --exec \"ts-node\" src/index.ts",
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "@types/node": "^14.14.7",
    "nodemon": "^2.0.6",
    "ts-node": "^9.0.0",
    "typescript": "^4.0.5"
  }
}
</code></pre><div class="toolbar"><div class="toolbar-item"><span>JSON</span></div><div class="toolbar-item"><button>Copy</button></div></div></div><p>四、新建目录src和src/index.ts、src/operations.ts文件</p><div class="code-toolbar"><pre class=" language-typescript"><code class=" language-typescript">// operations.ts
export const add = (x: number, y: number): number =&gt; {
  return x + y
}
export const sub = (x: number, y: number): number =&gt; {
  return x - y
}
export const mul = (x: number, y: number): number =&gt; {
  return x * y
}
export const div = (x: number, y: number): number =&gt; {
  return x + y
}
export default {
  add,
  sub,
  mul,
  div
}
</code></pre><div class="toolbar"><div class="toolbar-item"><span>TypeScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div><div class="code-toolbar"><pre class=" language-typescript"><code class=" language-typescript">import { add } from './operations'

const result = add(1, 3)
console.log(result)
</code></pre><div class="toolbar"><div class="toolbar-item"><span>TypeScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div><p>五、跑一下结果</p><div class="code-toolbar"><pre class=" language-shell"><code class=" language-shell">npm run dev # 启动开发服务 出现以下界面 说明成功了
# &gt; ts_demo@1.0.0 dev D:\temp\ts_demo
# &gt; nodemon --watch src/**/*.ts --exec "ts-node" src/index.ts

# [nodemon] 2.0.6
# [nodemon] to restart at any time, enter `rs`
# [nodemon] watching path(s): src\**\*.ts
# [nodemon] watching extensions: ts,json
# [nodemon] starting `ts-node src/index.ts`
# 4
# [nodemon] clean exit - waiting for changes before restart

</code></pre><div class="toolbar"><div class="toolbar-item"><span>Shell</span></div><div class="toolbar-item"><button>Copy</button></div></div></div><p>六、任意修改 <code>index.ts</code> 文件，观察一下cmd内容变化，有变化证明监听也成功了。 七、在 TypeScript 中加入 ESLint</p><div class="code-toolbar"><pre class=" language-shell"><code class=" language-shell"># 同一cmd 先用ctrl+c退出当前任务
npm install eslint --save-dev # 添加 eslint
npm install @typescript-eslint/parser --save-dev # 添加eslint ts解析器
npm install @typescript-eslint/eslint-plugin --save-dev # 添加 eslint ts插件
npm install eslint-config-alloy --save-dev # 添加 AlloyTeam 的eslint配置

# 也可以一次性安装
# npm install eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-config-alloy --save-dev
</code></pre><div class="toolbar"><div class="toolbar-item"><span>Shell</span></div><div class="toolbar-item"><button>Copy</button></div></div></div><p>在项目的根目录下创建eslint配置文件 <code>.eslintrc.js</code> ，内容如下：</p><div class="code-toolbar"><pre class=" language-javascript"><code class=" language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'alloy'</span><span class="token punctuation">,</span>
    <span class="token string">'alloy/typescript'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  env<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 你的环境变量（包含多个预定义的全局变量）</span>
    <span class="token comment">//</span>
    <span class="token comment">// browser: true,</span>
    <span class="token comment">// node: true,</span>
    <span class="token comment">// mocha: true,</span>
    <span class="token comment">// jest: true,</span>
    <span class="token comment">// jquery: true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  globals<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 你的全局变量（设置为 false 表示它不允许被重新赋值）</span>
    <span class="token comment">//</span>
    <span class="token comment">// myGlobal: false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 自定义你的规则</span>
    <span class="token string">'@typescript-eslint/explicit-member-accessibility'</span><span class="token operator">:</span> <span class="token string">'off'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div><p><code>package.json</code> 添加一个任务：</p><div class="code-toolbar"><pre class=" language-json"><code class=" language-json">{
  "scripts": {
    "start": "npm run build",
    "build": "npm run eslint &amp;&amp; tsc -p .",
    "dev": "nodemon --watch src/**/*.ts --exec \"ts-node\" src/index.ts",
    "eslint": "eslint src --ext .ts",
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
}
</code></pre><div class="toolbar"><div class="toolbar-item"><span>JSON</span></div><div class="toolbar-item"><button>Copy</button></div></div></div><p>在 <code>index.ts</code> 中加入 <code>var a = 1</code> ，然后运行下 <code>npm run eslint</code> 就可以看到有错误提示了。 build任务中加入了打包之前先做一下eslint。</p><p>到此为止，一个基本的开发环境已经跑起来了。</p><p>&lt;video controls="" preload="auto" style="width: 100%"&gt; &lt;source src="videos/1.mp4" type="video/mp4"&gt; &lt;/video&gt;</p></article>
              <div class="totonoo--article-related">
                <ul>
                  <li>
                    <a href="#"><i class="iconfont icon-arrow-left"></i> css基本概念学习</a>
                  </li>
                  <li>
                    <a href="#">css基本概念学习 <i class="iconfont icon-arrow-right"></i></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <%- require('../../components/footer.html')()%>
        </div>
        <div class="white-tiger">
          <div class="totonoo--article-nav" id="totonoo--article-nav">
            <ul>
              <li class="h2 current" data-index="0">
                <a href="#typescript%E7%AE%80%E4%BB%8B">TypeScript简介</a>
              </li>
              <li class="h2" data-index="1">
                <a
                  href="#%E5%A7%8B%E4%BA%8Ejavascript%EF%BC%8C%E5%BD%92%E4%BA%8Ejavascript"
                  >始于JavaScript，归于JavaScript</a
                >
              </li>
              <li class="h2" data-index="2">
                <a
                  href="#%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%B7%A5%E5%85%B7%E6%9E%84%E5%BB%BA-%E5%A4%A7%E5%9E%8B%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"
                  >强大的工具构建 大型应用程序</a
                >
              </li>
              <li class="h2" data-index="3">
                <a href="#%E5%85%88%E8%BF%9B%E7%9A%84-javascript"
                  >先进的 JavaScript</a
                >
              </li>
            </ul>
          </div>
        </div>
    </div>
  </div>
</body>
</html>
